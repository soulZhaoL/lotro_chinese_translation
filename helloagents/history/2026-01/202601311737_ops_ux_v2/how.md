# 技术设计: 一键隧道与交互体验增强（方案2）

## 技术方案

### 核心技术
- 前端: React + Ant Design + @ant-design/pro-components
- 后端: FastAPI
- 脚本: Shell (zsh/bash 兼容)

### 实现要点
- 一键脚本使用固定隧道端口，先探测占用与隧道是否可用。
- 前端统一封装请求提示（成功/失败），对关键业务操作进行显式提示。
- 菜单图标基于 Ant Design Icons 统一风格。
- 词典分类枚举通过映射表转换，并用于筛选下拉。
- 文本列表新增字段，并用多行 + 截断 + Tooltip 展示长文本。

## 架构决策 ADR
### ADR-20260131-01: 前端统一提示策略
**上下文:** 分散的请求处理导致提示不一致或缺失。  
**决策:** 在 API 请求层统一封装提示策略，并允许局部覆盖。  
**理由:** 降低遗漏风险，提升一致性。  
**替代方案:** 每个页面自行处理 → 拒绝原因: 易漏、重复成本高。  
**影响:** 需要调整调用方式与错误处理分层。

## API设计
不变更后端 API，仅在前端补充提示与展示逻辑。

## 数据模型
无变更。

## 安全与性能
- **安全:** 一键脚本不写入敏感信息，使用环境变量或交互输入。
- **性能:** 列表文本截断在前端处理，避免大 DOM 阻塞，必要时可节流渲染。

## 测试与部署
- **测试:** 手动验证登录/编辑/认领/释放/提交提示；验证列表展示与筛选；验证脚本启动流程。
- **部署:** 仅开发环境脚本，不影响生产部署流程。
